<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      contentType="text/html"
      xmlns:ezcomp="http://java.sun.com/jsf/composite/ezcomp">

    
    <h:head>
        <f:facet name="first">
            <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
            <h:outputStylesheet library="css" name="css/bootstrap.css" />
            <h:outputStylesheet library="css" name="css/personalizados.css" />
            <link rel="icon" href="#{request.contextPath}/resources/img/icon.png"/>
            <title><ui:insert name="titulo">COPLIME</ui:insert></title>
        </f:facet>
    </h:head>

    <body data-tarjet=".bs-docs-sidebar" data-spy="scroll" data-twttr-rendered="true" style="background:url('#{request.contextPath}/resources/img/Fondo2.jpg')">
        
        
            
        
        <p:overlayPanel id="menu_administrador" for=":form_botones_barra:btnPanelContext" rendered="#{request.isUserInRole('Administrador')}">
            <h:form>
                <p:panelGrid columns="1"> 
                    <f:facet name="header">Menu para Administrador
                        <h:outputLabel value="#{request.getRemoteUser()}"/>
                    </f:facet>
                    <h:outputLink value="#{request.contextPath}/faces/users/admin/config/configuracionSistema.xhtml">Configuración sistema</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/infoUsuario.xhtml">Información del usuario</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/admin/verAdministradores.xhtml">Ver administradores</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verPuntosLimpios.xhtml">Ver puntos limpios</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verNotificaciones.xhtml">Ver notificaciones
                        <h:outputText id="txt_num_notif" styleClass="ui-li-count" value="(#{notificacionesManagedBeans.cantidadNotificaciones})"/>
                        <p:poll interval="30" autoStart="true" listener="#{notificacionesManagedBeans.refresNotificaciones(null)}" update="txt_num_notif"/>
                    </h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verSolicitudesMantencion.xhtml">Ver solicitudes de mantención</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verRevisiones.xhtml">Ver revisiones de puntos limpios</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verMantenciones.xhtml">Ver mantenciones de puntos limpios</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verOperariosMantencion.xhtml">Ver operarios de mantención</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verInspectores.xhtml">Ver inspectores</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/admin/generarReporte.xhtml">Generar reportes</h:outputLink>
                    <h:outputLink >Ayuda</h:outputLink>
                    <h:commandLink action="#{autenticadorMB.logout()}">Cerrar sesión</h:commandLink>
                </p:panelGrid>
            </h:form>
        </p:overlayPanel>
        
        <p:overlayPanel id="menu_inspector" for=":form_botones_barra:btnPanelContext" rendered="#{request.isUserInRole('Inspector')}">
            <h:form>
                <p:panelGrid columns="1"> 
                    <f:facet name="header">Menu para Inspector
                        <h:outputLabel value="#{request.getRemoteUser()}"/>
                    </f:facet>
                    <h:outputLink value="#{request.contextPath}/faces/users/infoUsuario.xhtml">Información del usuario</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verPuntosLimpios.xhtml">Ver puntos limpios</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verNotificaciones.xhtml">Ver notificaciones
                        <h:outputText id="txt_num_notif" styleClass="ui-li-count" value="(#{notificacionesManagedBeans.cantidadNotificaciones})"/>
                        <p:poll interval="30" autoStart="true" listener="#{notificacionesManagedBeans.refresNotificaciones(null)}" update="txt_num_notif"/>
                    </h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verSolicitudesMantencion.xhtml">Ver solicitudes de mantención</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verRevisiones.xhtml">Ver revisiones de puntos limpios</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verOperariosMantencion.xhtml">Ver operarios de mantención</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verInspectores.xhtml">Ver inspectores</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/inspector/agregarRevisionPuntoLimpio.xhtml">Agregar revisión de punto limpio</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/inspector/solicitarMantencionPuntoLimpio.xhtml">Solicitar una mantención de punto limpio</h:outputLink>
                    <h:outputLink >Ayuda</h:outputLink>
                    <h:commandLink action="#{autenticadorMB.logout()}">Cerrar sesión</h:commandLink>
                </p:panelGrid>
            </h:form>
        </p:overlayPanel>
            
        <p:overlayPanel id="menu_operario" for=":form_botones_barra:btnPanelContext" rendered="#{request.isUserInRole('Operario')}" >
            <h:form>
                <p:panelGrid columns="1"> 
                    <f:facet name="header">Menu para Operario
                        <h:outputLabel value="#{request.getRemoteUser()}"/>
                    </f:facet>
                    <h:outputLink value="#{request.contextPath}/faces/users/infoUsuario.xhtml">Información del usuario</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verPuntosLimpios.xhtml">Ver puntos limpios</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verNotificaciones.xhtml">Ver notificaciones
                        <h:outputText id="txt_num_notif" styleClass="ui-li-count" value="(#{notificacionesManagedBeans.cantidadNotificaciones})"/>
                        <p:poll interval="30" autoStart="true" listener="#{notificacionesManagedBeans.refresNotificaciones(null)}" update="txt_num_notif"/>
                    </h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verSolicitudesMantencion.xhtml">Ver solicitudes de mantención
                        <h:outputText id="txt_num_solic" styleClass="ui-li-count" value="(#{solicitudesManagedBeans.cantidadSolicitudes})"/>
                        <p:poll interval="30" autoStart="true" listener="#{solicitudesManagedBeans.refresSolicitudes(null)}" update="txt_num_solic"/>
                    </h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verMantenciones.xhtml">Ver mantenciones de puntos limpios</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verOperariosMantencion.xhtml">Ver operarios de mantención</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/verInspectores.xhtml">Ver inspectores</h:outputLink>
                    <h:outputLink value="#{request.contextPath}/faces/users/operario/agregarMantencionPuntoLimpio.xhtml">Agregar mantención de punto limpio</h:outputLink>
                    <h:outputLink >Ayuda</h:outputLink>
                    <h:commandLink action="#{autenticadorMB.logout()}">Cerrar sesión</h:commandLink>
                </p:panelGrid>
            </h:form>
        </p:overlayPanel>
        
        
        
        <div class="navbar navbar-inverse navbar-fixed-top" style="z-index: 1000 !important;">
        	<div class="navbar-inner">
                    <div class="row-fluid special">
                    	<div class="span2">
                            <h:form id="form_botones_barra" style="margin:0px;">
                                <p>
                                    <ezcomp:boton_barra_superior rendered="false"
                                                             classIcon="ui-icon-bars" type="button"
                                                             title="Menú principal"
                                                             id="btnPanelContext2"/>
                                    
                                    <p:outputPanel rendered="#{request.isUserInRole('Administrador') 
                                                             || request.isUserInRole('Inspector') 
                                                             || request.isUserInRole('Operario')}">
                                        <a class="btn-menu-superior">
                                            <span class="ui-btn-inner">
                                                <span class="ui-icon ui-icon-shadow ui-icon-bars">
                                                </span>
                                            </span>
                                            <h:commandButton type="button" id="btnPanelContext" value="  " title="Menú principal"
                                                            styleClass="transparente command_btn_barra_superior"/>
                                        </a>
                                    </p:outputPanel>
                                    <ui:insert name="botonesBarra"></ui:insert>
                                </p>
                            </h:form>
                        </div>
                        <div class="span8 text-center">
                            <h3 style="line-height:20px; color: white;"><ui:insert name="titulo">COPLIME</ui:insert></h3>
                        </div>
                        <div class="span2 text-right">
                            <h:graphicImage alt="Logo COPLIME" 
                                            width="40px" height="40px"
                                            url="/resources/img/icon.png"/>
                        </div>
                    </div>
                </div>
        </div>
        
        
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span12 text-center">
                    <ui:insert name="centro">centro</ui:insert>
                </div>
            </div>
            <div class="row-fluid text-center">
                <footer class="footer span12"> Grupo N°3 - PINGESO 2013-1 - U de Santiago</footer>
            </div>
        </div>
        <div class="sobreBarra">
            <h:form id="formMsj">
                <p:growl id="growl_msj_accion" />
            </h:form>
        </div>
      
    </body>
</html>
